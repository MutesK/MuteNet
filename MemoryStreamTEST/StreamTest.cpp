#include "StreamTest.h"
#include "../Foundation/OutputMemoryStream.h"
#include "../Foundation/InputMemoryStream.h"

const std::string inputData =
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000"
"HELLO_UNITTEST000000000000000000000000000000000000000000000";

namespace Util
{
	StreamTest::StreamTest()
	{
		Stream = std::make_shared<OutputMemoryStream>();
	}
	

	void StreamTest::EnqueueDataStream()
	{
		Stream->Serialize((void*)inputData.c_str(), inputData.length());
	}

	void StreamTest::TestGetBufferElements()
	{
		auto heapblock = Stream->GetHeapBlock();
		auto InputStream = std::make_shared<InputMemoryStream>(heapblock);
		char buffer[10000]{ '\0' };

		InputStream->Serialize(buffer, inputData.length());
		if (strncmp(buffer, inputData.c_str(), inputData.length()) != 0)
			throw;
	}
}
